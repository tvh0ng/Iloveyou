<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Valentine üíï</title>

  <style>
    :root{
      --pink:#ff4b5c;
      --pink2:#ff2d55;
      --glass: rgba(255,255,255,.22);
      --glass2: rgba(255,255,255,.12);
      --shadow: 0 20px 60px rgba(0,0,0,.18);
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      font-family:'Segoe UI', system-ui, -apple-system, Arial, sans-serif;
      overflow:hidden;
      color:#111;
      background: radial-gradient(1200px 700px at 20% 20%, #ffe1ea 0%, transparent 60%),
                  radial-gradient(900px 600px at 80% 30%, #fff1d6 0%, transparent 55%),
                  linear-gradient(135deg,#ff9a9e,#fad0c4);
      position:relative;
    }

    body::before{
      content:"";
      position:absolute; inset:-30%;
      background: conic-gradient(from 180deg, rgba(255,255,255,.0), rgba(255,255,255,.35), rgba(255,255,255,.0));
      filter: blur(50px);
      animation: spin 10s linear infinite;
      opacity:.55;
      pointer-events:none;
    }
    @keyframes spin{ to{ transform: rotate(360deg); } }

    .bokeh{
      position:absolute; inset:0;
      pointer-events:none;
      z-index:0;
    }
    .bokeh span{
      position:absolute;
      width:14px; height:14px;
      border-radius:999px;
      background: rgba(255,255,255,.45);
      filter: blur(0.2px);
      animation: floatUp linear infinite;
      opacity:.8;
    }
    @keyframes floatUp{
      0%{ transform: translateY(110vh) scale(.6); opacity:0; }
      10%{ opacity:.85; }
      100%{ transform: translateY(-20vh) scale(1.35); opacity:0; }
    }

    .card{
      width:min(520px, 92vw);
      padding:34px 30px 26px;
      border-radius:26px;
      text-align:center;
      background: linear-gradient(180deg, rgba(255,255,255,.78), rgba(255,255,255,.58));
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,.55);
      position:relative;
      z-index:2;
      transform: translateY(8px);
      animation: pop 900ms cubic-bezier(.2,1.2,.2,1) both;
    }
    @keyframes pop{
      0%{ transform: translateY(25px) scale(.96); opacity:0; }
      100%{ transform: translateY(0) scale(1); opacity:1; }
    }

    .card::before{
      content:"";
      position:absolute; inset:-2px;
      border-radius:28px;
      padding:2px;
      background: linear-gradient(135deg, rgba(255,75,92,.55), rgba(255,255,255,.7), rgba(255,45,85,.45));
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events:none;
      opacity:.85;
    }

    .title{
      margin:0 0 10px;
      font-size: clamp(26px, 3.2vw, 38px);
      color: var(--pink);
      letter-spacing:.2px;
      text-shadow: 0 6px 22px rgba(255,75,92,.22);
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:center;
    }

    .subtitle{
      margin:0 0 18px;
      font-size: 14.5px;
      color: rgba(30,30,30,.78);
      line-height:1.4;
    }

    .photo{
      width: 100%;
      max-width: 420px;
      margin: 14px auto 16px;
      border-radius: 18px;
      overflow:hidden;
      position:relative;
      box-shadow: 0 12px 30px rgba(0,0,0,.12);
      border:1px solid rgba(255,255,255,.55);
      background: rgba(255,255,255,.35);
    }
    .photo img{
      width:100%;
      display:block;
      transform: scale(1.03);
      transition: transform .8s ease;
    }
    .card:hover .photo img{ transform: scale(1.08); }

    .photo::after{
      content:"";
      position:absolute; inset:0;
      background: radial-gradient(600px 220px at 30% 10%, rgba(255,255,255,.35), transparent 55%),
                  linear-gradient(180deg, rgba(0,0,0,.05), rgba(0,0,0,.12));
      pointer-events:none;
    }

    .row{
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top: 6px;
    }
    button{
      padding:12px 20px;
      border:none;
      border-radius:999px;
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      color:white;
      font-size:15.5px;
      cursor:pointer;
      transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
      box-shadow: 0 12px 26px rgba(255,75,92,.28);
      display:inline-flex;
      align-items:center;
      gap:8px;
      user-select:none;
    }
    button:hover{
      transform: translateY(-2px) scale(1.03);
      filter: brightness(1.05);
      box-shadow: 0 16px 36px rgba(255,75,92,.32);
    }
    button:active{ transform: translateY(0) scale(.99); }

    .btn-ghost{
      background: rgba(255,255,255,.55);
      color: #1b1b1b;
      border: 1px solid rgba(255,255,255,.8);
      box-shadow: 0 12px 26px rgba(0,0,0,.08);
    }
    .btn-ghost:hover{
      box-shadow: 0 18px 38px rgba(0,0,0,.12);
    }

    #message{
      margin-top:18px;
      padding:14px 14px;
      font-size:18px;
      color:#222;
      display:none;
      line-height:1.45;
      border-radius:16px;
      background: linear-gradient(180deg, rgba(255,255,255,.7), rgba(255,255,255,.45));
      border:1px solid rgba(255,255,255,.7);
      animation: fadeUp .55s ease both;
      white-space: pre-line;
    }
    @keyframes fadeUp{
      from{ opacity:0; transform: translateY(8px); }
      to{ opacity:1; transform: translateY(0); }
    }

    .cursor{
      display:inline-block;
      width:10px;
      margin-left:2px;
      animation: blink .9s infinite;
    }
    @keyframes blink{ 50%{ opacity:0; } }

    .heart{
      position:absolute;
      z-index:1;
      top:-10vh;
      font-size:18px;
      animation: fall linear forwards;
      will-change: transform, opacity;
      filter: drop-shadow(0 10px 10px rgba(0,0,0,.08));
      pointer-events:none;
    }
    @keyframes fall{
      0%{ transform: translateY(-10vh) translateX(0) rotate(0deg) scale(.9); opacity:0; }
      8%{ opacity:1; }
      100%{ transform: translateY(115vh) translateX(var(--drift)) rotate(360deg) scale(1.15); opacity:0; }
    }

    .sparkle{
      position:absolute;
      width:10px; height:10px;
      border-radius:999px;
      background: rgba(255,255,255,.9);
      box-shadow: 0 0 18px rgba(255,255,255,.85);
      pointer-events:none;
      animation: sparkle 700ms ease-out forwards;
      z-index:3;
    }
    @keyframes sparkle{
      0%{ transform: translate(-50%,-50%) scale(.6); opacity:1; }
      100%{ transform: translate(calc(-50% + var(--sx)), calc(-50% + var(--sy))) scale(0); opacity:0; }
    }

    .hint{
      margin-top: 10px;
      font-size: 12.5px;
      color: rgba(20,20,20,.55);
    }

    /* Overlay b·∫≠t nh·∫°c n·∫øu autoplay b·ªã ch·∫∑n */
    .autoplay-overlay{
      position:fixed; inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.25);
      backdrop-filter: blur(6px);
      z-index: 9999;
    }
    .autoplay-box{
      width:min(420px, 92vw);
      background: rgba(255,255,255,.9);
      border:1px solid rgba(255,255,255,.7);
      border-radius: 22px;
      box-shadow: 0 20px 60px rgba(0,0,0,.18);
      padding: 18px 18px 14px;
      text-align:center;
    }
    .autoplay-box h3{
      margin: 4px 0 8px;
      color: var(--pink2);
      font-size: 18px;
    }
    .autoplay-box p{
      margin: 0 0 12px;
      color: rgba(0,0,0,.65);
      font-size: 13.5px;
      line-height:1.35;
    }

    @media (prefers-reduced-motion: reduce){
      *{ animation: none !important; transition: none !important; }
      body::before{ display:none; }
    }
  </style>
</head>

<body>

  <div class="bokeh" id="bokeh"></div>

  <div class="card" id="card">
    <h1 class="title">Happy Valentine üíï</h1>
    <p class="subtitle">
      M·ªôt ch√∫t lung linh cho ng√†y ƒë·∫∑c bi·ªát ‚ú®<br/>
      (·∫¢nh + nh·∫°c ƒë√£ g·∫Øn s·∫µn)
    </p>

    <!-- ‚úÖ ·∫¢NH C·ª¶A B·∫†N: ƒë·∫∑t file couple.jpg c√πng th∆∞ m·ª•c -->
    <div class="photo">
      <img src="couple.jpg" alt="Our photo" />
    </div>

    <div class="row">
      <button id="btnLove" onclick="showMessage()">üíå Nh·∫•n v√†o ƒë√¢y</button>
      <button class="btn-ghost" onclick="toggleMusic()">üéµ B·∫≠t/T·∫Øt nh·∫°c</button>
      <button class="btn-ghost" onclick="burst()">üí• B√πng n·ªï</button>
    </div>

    <div id="message"></div>
    <div class="hint">Tip: click v√†o n·ªÅn ƒë·ªÉ c√≥ ‚Äúsparkle‚Äù ‚ú®</div>
  </div>

  <!-- ‚úÖ NH·∫†C C·ª¶A B·∫†N: ƒë·∫∑t file Ta-La-Cua-Nhau.mp3 c√πng th∆∞ m·ª•c -->
  <audio id="bgm" loop preload="auto">
    <source src="Ta-La-Cua-Nhau.mp3" type="audio/mpeg">
  </audio>

  <!-- Overlay n·∫øu autoplay b·ªã ch·∫∑n -->
  <div class="autoplay-overlay" id="autoplayOverlay">
    <div class="autoplay-box">
      <h3>üéµ B·∫≠t nh·∫°c n√®</h3>
      <p>Tr√¨nh duy·ªát ƒëang ch·∫∑n t·ª± ph√°t nh·∫°c. B·∫°n ch·∫°m 1 c√°i l√† nh·∫°c ch·∫°y ngay.</p>
      <button onclick="forcePlay()">‚ñ∂Ô∏è B·∫≠t nh·∫°c</button>
    </div>
  </div>

  <script>
    const messageEl = document.getElementById("message");
    const bgm = document.getElementById("bgm");
    const bokeh = document.getElementById("bokeh");
    const overlay = document.getElementById("autoplayOverlay");

    // ========== c·ªë autoplay khi m·ªü trang ==========
    async function tryAutoplay(){
      try{
        // c·ªë play ngay khi load
        await bgm.play();
        overlay.style.display = "none";
      }catch(e){
        // b·ªã ch·∫∑n -> hi·ªán overlay ƒë·ªÉ user click 1 c√°i
        overlay.style.display = "flex";
      }
    }

    function forcePlay(){
      bgm.play().then(()=>{
        overlay.style.display = "none";
      }).catch(()=>{});
    }

    window.addEventListener("load", tryAutoplay);

    // ========== BOKEH INIT ==========
    (function initBokeh(){
      const n = 18;
      for(let i=0;i<n;i++){
        const s = document.createElement("span");
        const size = Math.random()*18 + 10;
        s.style.width = size + "px";
        s.style.height = size + "px";
        s.style.left = Math.random()*100 + "vw";
        s.style.animationDuration = (Math.random()*8 + 8) + "s";
        s.style.animationDelay = (Math.random()*6) + "s";
        s.style.opacity = (Math.random()*0.45 + 0.25).toFixed(2);
        bokeh.appendChild(s);
      }
    })();

    // ========== TYPEWRITER ==========
    function typeWriter(el, text, speed=26){
      el.style.display = "block";
      el.innerHTML = "";
      const cursor = document.createElement("span");
      cursor.className = "cursor";
      cursor.textContent = "‚ñç";
      el.appendChild(cursor);

      let i = 0;
      const timer = setInterval(()=>{
        cursor.insertAdjacentText("beforebegin", text[i] || "");
        i++;
        if(i >= text.length){
          clearInterval(timer);
          cursor.remove();
        }
      }, speed);
    }

    // ========== SHOW MESSAGE ==========
    function showMessage(){
      const text =
        "Ch√∫c em m·ªôt ng√†y Valentine th·∫≠t ng·ªçt ng√†o ‚ù§Ô∏è\n" +
        "C·∫£m ∆°n v√¨ ƒë√£ xu·∫•t hi·ªán trong cu·ªôc ƒë·ªùi anh!\n" +
        "Mong m√¨nh s·∫Ω c√≥ th·∫≠t nhi·ªÅu k·ª∑ ni·ªám ƒë·∫πp c√πng nhau üíñ";
      typeWriter(messageEl, text, 22);
      burst(26);

      // n·∫øu nh·∫°c ch∆∞a ch·∫°y v√¨ b·ªã ch·∫∑n, click n√∫t n√†y c≈©ng ƒë∆∞·ª£c t√≠nh l√† t∆∞∆°ng t√°c
      bgm.play().catch(()=>{ overlay.style.display = "flex"; });
    }

    // ========== FALLING HEARTS ==========
    const hearts = ["‚ù§","üíó","üíñ","üíò","üíï","üíû","üíì","üíù"];
    function createHeart(){
      const heart = document.createElement("div");
      heart.className = "heart";
      heart.textContent = hearts[Math.floor(Math.random()*hearts.length)];

      const left = Math.random()*100;
      const duration = Math.random()*3.2 + 3.2;
      const drift = (Math.random()*160 - 80).toFixed(0) + "px";

      heart.style.left = left + "vw";
      heart.style.animationDuration = duration + "s";
      heart.style.setProperty("--drift", drift);
      heart.style.fontSize = (Math.random()*18 + 16).toFixed(0) + "px";
      heart.style.opacity = (Math.random()*0.55 + 0.45).toFixed(2);

      document.body.appendChild(heart);
      setTimeout(()=> heart.remove(), (duration*1000) + 300);
    }
    setInterval(createHeart, 220);

    // ========== HEART BURST ==========
    function burst(count=18){
      const cx = window.innerWidth/2;
      const cy = window.innerHeight/2;

      for(let i=0;i<count;i++){
        const h = document.createElement("div");
        h.className = "heart";
        h.textContent = hearts[Math.floor(Math.random()*hearts.length)];
        h.style.left = cx + "px";
        h.style.top = (cy - 40) + "px";
        h.style.position = "fixed";
        h.style.animationDuration = (Math.random()*1.2 + 1.6) + "s";
        h.style.setProperty("--drift", (Math.random()*520 - 260).toFixed(0) + "px");
        h.style.fontSize = (Math.random()*14 + 18).toFixed(0) + "px";
        document.body.appendChild(h);
        setTimeout(()=> h.remove(), 2600);
      }
    }

    // ========== CLICK SPARKLES ==========
    function sparklesAt(x, y){
      const n = 12;
      for(let i=0;i<n;i++){
        const sp = document.createElement("div");
        sp.className = "sparkle";
        sp.style.left = x + "px";
        sp.style.top = y + "px";
        sp.style.setProperty("--sx", (Math.random()*120 - 60).toFixed(0) + "px");
        sp.style.setProperty("--sy", (Math.random()*120 - 60).toFixed(0) + "px");
        sp.style.width = sp.style.height = (Math.random()*10 + 6).toFixed(0) + "px";
        document.body.appendChild(sp);
        setTimeout(()=> sp.remove(), 750);
      }
    }

    document.addEventListener("click", (e)=>{
      const tag = (e.target.tagName || "").toLowerCase();
      if(tag === "button") return;
      sparklesAt(e.clientX, e.clientY);
    });

    // ========== MUSIC TOGGLE ==========
    function toggleMusic(){
      if(bgm.paused) bgm.play().catch(()=>{ overlay.style.display = "flex"; });
      else bgm.pause();
    }

    // optional: sparkles
    setInterval(()=>{
      sparklesAt(Math.random()*innerWidth, Math.random()*innerHeight);
    }, 2500);
  </script>
</body>
</html>
